<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Remote Vehicle Interaction C API: include/rvi.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Remote Vehicle Interaction C API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">rvi.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Remote Vehicle Interaction library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
</div>
<p><a href="rvi_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ac78b62a65c4f2e17a64f3841aa1555e1"><td class="memItemLeft" align="right" valign="top">typedef void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a></td></tr>
<tr class="separator:ac78b62a65c4f2e17a64f3841aa1555e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ce1ba1e3026470b887b160a5e1d13cc"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rvi_8h.html#a5ce1ba1e3026470b887b160a5e1d13cc">TRviCallback</a>) (int fd, void *serviceData, const char *parameters)</td></tr>
<tr class="separator:a5ce1ba1e3026470b887b160a5e1d13cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aeed1da6c6f4f94d99f37d7ac1ac71ddb"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rvi_8h.html#aeed1da6c6f4f94d99f37d7ac1ac71ddb">ERviStatus</a> { <br />
&#160;&#160;<a class="el" href="rvi_8h.html#aeed1da6c6f4f94d99f37d7ac1ac71ddba5cf5fd72d4f029a41252d7a4da616876">RVI_OK</a> = 0, 
<a class="el" href="rvi_8h.html#aeed1da6c6f4f94d99f37d7ac1ac71ddbafc1669c8fcb43d5e26b5f27b38919050">RVI_ERR_OPENSSL</a> = 100, 
<a class="el" href="rvi_8h.html#aeed1da6c6f4f94d99f37d7ac1ac71ddba361dfcd7d313967375342b4b763d3c1b">RVI_ERR_NOCONFIG</a> = 1001, 
<a class="el" href="rvi_8h.html#aeed1da6c6f4f94d99f37d7ac1ac71ddba568f843abd268eaaebe2e980abd9714f">RVI_ERR_JSON</a> = 1002, 
<br />
&#160;&#160;<a class="el" href="rvi_8h.html#aeed1da6c6f4f94d99f37d7ac1ac71ddbae057e884cf9ac810224d4146729aa67e">RVI_ERR_SERVCERT</a> = 1003, 
<a class="el" href="rvi_8h.html#aeed1da6c6f4f94d99f37d7ac1ac71ddbafd47a7d0e4041c819c0974f873b9c80c">RVI_ERR_CLIENTCERT</a> = 1004, 
<a class="el" href="rvi_8h.html#aeed1da6c6f4f94d99f37d7ac1ac71ddba7ff56995cc8ba07c087868a82a1ae614">RVI_ERR_NORCVCERT</a> = 1005, 
<a class="el" href="rvi_8h.html#aeed1da6c6f4f94d99f37d7ac1ac71ddba557a1374709953e1bc6cc42fa1064ed0">RVI_ERR_STREAMEND</a> = 1006, 
<br />
&#160;&#160;<a class="el" href="rvi_8h.html#aeed1da6c6f4f94d99f37d7ac1ac71ddba0445312b4f9444564313242404481481">RVI_ERR_NOCRED</a> = 1007, 
<a class="el" href="rvi_8h.html#aeed1da6c6f4f94d99f37d7ac1ac71ddba8e509d3cc8c9fc2a9e02d3d3d156b0af">RVI_ERR_NOCMD</a> = 1008, 
<a class="el" href="rvi_8h.html#aeed1da6c6f4f94d99f37d7ac1ac71ddbaee7a5d33e64ebb2a58666fd3ce96eecd">RVI_ERR_RIGHTS</a> = 1009, 
<a class="el" href="rvi_8h.html#aeed1da6c6f4f94d99f37d7ac1ac71ddba56d42dd841e33ced44cc69d1572c8b56">RVI_ERR_JSON_PART</a> = 1010
<br />
 }</td></tr>
<tr class="separator:aeed1da6c6f4f94d99f37d7ac1ac71ddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8d7cd26c745770781ea03547596faf32"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rvi_8h.html#a8d7cd26c745770781ea03547596faf32">rviInit</a> (char *configFilename)</td></tr>
<tr class="memdesc:a8d7cd26c745770781ea03547596faf32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the RVI library. Call before using any other functions.  <a href="#a8d7cd26c745770781ea03547596faf32">More...</a><br /></td></tr>
<tr class="separator:a8d7cd26c745770781ea03547596faf32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb87e68e1dac66c8fa2800cc7dfdb20c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rvi_8h.html#adb87e68e1dac66c8fa2800cc7dfdb20c">rviCleanup</a> (<a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a> handle)</td></tr>
<tr class="memdesc:adb87e68e1dac66c8fa2800cc7dfdb20c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tear down the API.  <a href="#adb87e68e1dac66c8fa2800cc7dfdb20c">More...</a><br /></td></tr>
<tr class="separator:adb87e68e1dac66c8fa2800cc7dfdb20c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6600e35ef71734da8db7a3a9d9a44990"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rvi_8h.html#a6600e35ef71734da8db7a3a9d9a44990">rviConnect</a> (<a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a> handle, const char *addr, const char *port)</td></tr>
<tr class="memdesc:a6600e35ef71734da8db7a3a9d9a44990"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect to a remote node at a specified address and port.  <a href="#a6600e35ef71734da8db7a3a9d9a44990">More...</a><br /></td></tr>
<tr class="separator:a6600e35ef71734da8db7a3a9d9a44990"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e88293753962ee1f4c71fdf43696bfa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rvi_8h.html#a2e88293753962ee1f4c71fdf43696bfa">rviDisconnect</a> (<a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a> handle, int fd)</td></tr>
<tr class="memdesc:a2e88293753962ee1f4c71fdf43696bfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnect from a remote node with a specified file descriptor.  <a href="#a2e88293753962ee1f4c71fdf43696bfa">More...</a><br /></td></tr>
<tr class="separator:a2e88293753962ee1f4c71fdf43696bfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cbb737c19f0da2816bd47fe0d4b6bbf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rvi_8h.html#a3cbb737c19f0da2816bd47fe0d4b6bbf">rviGetConnections</a> (<a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a> handle, int *conn, int *connSize)</td></tr>
<tr class="memdesc:a3cbb737c19f0da2816bd47fe0d4b6bbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return all file descriptors in the RVI context.  <a href="#a3cbb737c19f0da2816bd47fe0d4b6bbf">More...</a><br /></td></tr>
<tr class="separator:a3cbb737c19f0da2816bd47fe0d4b6bbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9325f0d58e28a06e04bab7b9bcb011bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rvi_8h.html#a9325f0d58e28a06e04bab7b9bcb011bf">rviRegisterService</a> (<a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a> handle, const char *serviceName, <a class="el" href="rvi_8h.html#a5ce1ba1e3026470b887b160a5e1d13cc">TRviCallback</a> callback, void *serviceData)</td></tr>
<tr class="memdesc:a9325f0d58e28a06e04bab7b9bcb011bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a service with a callback function.  <a href="#a9325f0d58e28a06e04bab7b9bcb011bf">More...</a><br /></td></tr>
<tr class="separator:a9325f0d58e28a06e04bab7b9bcb011bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a179f0b006746cfb7ffa643e7e39bb142"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rvi_8h.html#a179f0b006746cfb7ffa643e7e39bb142">rviUnregisterService</a> (<a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a> handle, const char *serviceName)</td></tr>
<tr class="memdesc:a179f0b006746cfb7ffa643e7e39bb142"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a previously registered service.  <a href="#a179f0b006746cfb7ffa643e7e39bb142">More...</a><br /></td></tr>
<tr class="separator:a179f0b006746cfb7ffa643e7e39bb142"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a1b2d9dce2123198fa75a5d66b8ecd3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rvi_8h.html#a1a1b2d9dce2123198fa75a5d66b8ecd3">rviGetServices</a> (<a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a> handle, char **result, int *len)</td></tr>
<tr class="memdesc:a1a1b2d9dce2123198fa75a5d66b8ecd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get list of services available.  <a href="#a1a1b2d9dce2123198fa75a5d66b8ecd3">More...</a><br /></td></tr>
<tr class="separator:a1a1b2d9dce2123198fa75a5d66b8ecd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a429680d590cfe541114232b62fb0ff58"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rvi_8h.html#a429680d590cfe541114232b62fb0ff58">rviInvokeService</a> (<a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a> handle, const char *serviceName, const char *parameters)</td></tr>
<tr class="memdesc:a429680d590cfe541114232b62fb0ff58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoke a remote service.  <a href="#a429680d590cfe541114232b62fb0ff58">More...</a><br /></td></tr>
<tr class="separator:a429680d590cfe541114232b62fb0ff58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f36294f32f87d64e14a03aeb60c4f66"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rvi_8h.html#a7f36294f32f87d64e14a03aeb60c4f66">rviProcessInput</a> (<a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a> handle, int *fdArr, int fdLen)</td></tr>
<tr class="memdesc:a7f36294f32f87d64e14a03aeb60c4f66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle input on remote connection(s).  <a href="#a7f36294f32f87d64e14a03aeb60c4f66">More...</a><br /></td></tr>
<tr class="separator:a7f36294f32f87d64e14a03aeb60c4f66"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Remote Vehicle Interaction library. </p>
<p>This file is responsible for exposing all available function prototypes and data types for the RVI library.</p>
<p>This is an initial prototype of the RVI library in C and is subject to change. The intended use is to allow a calling application to connect to remote RVI nodes, discover services, register additional services, and invoke remote services.</p>
<p>The RVI library depends on the following libraries:</p>
<p>C standard library: <a href="https://www-s.acm.illinois.edu/webmonkeys/book/c_guide/index.html">https://www-s.acm.illinois.edu/webmonkeys/book/c_guide/index.html</a></p>
<p>libJWT: <a href="https://github.com/benmcollins/libjwt/">https://github.com/benmcollins/libjwt/</a></p>
<p>Jansson: <a href="http://www.digip.org/jansson/">http://www.digip.org/jansson/</a></p>
<p>OpenSSL: <a href="https://www.openssl.org/">https://www.openssl.org/</a></p>
<p>The RVI library does not currently use the following, but may include it for future interopability with RVI Core nodes:</p>
<p>mpack: <a href="http://ludocode.github.io/mpack/">http://ludocode.github.io/mpack/</a></p>
<dl class="section author"><dt>Author</dt><dd>Tatiana Jamison &lt;<a href="#" onclick="location.href='mai'+'lto:'+'tja'+'mi'+'son'+'@j'+'agu'+'ar'+'lan'+'dr'+'ove'+'r.'+'com'; return false;">tjami<span style="display: none;">.nosp@m.</span>son@<span style="display: none;">.nosp@m.</span>jagua<span style="display: none;">.nosp@m.</span>rlan<span style="display: none;">.nosp@m.</span>drove<span style="display: none;">.nosp@m.</span>r.co<span style="display: none;">.nosp@m.</span>m</a>&gt; </dd></dl>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a5ce1ba1e3026470b887b160a5e1d13cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* TRviCallback) (int fd, void *serviceData, const char *parameters)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function signature for RVI callback functions </p>

</div>
</div>
<a class="anchor" id="ac78b62a65c4f2e17a64f3841aa1555e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void* <a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Application handle used to interact with RVI </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="aeed1da6c6f4f94d99f37d7ac1ac71ddb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="rvi_8h.html#aeed1da6c6f4f94d99f37d7ac1ac71ddb">ERviStatus</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function return status codes </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="aeed1da6c6f4f94d99f37d7ac1ac71ddba5cf5fd72d4f029a41252d7a4da616876"></a>RVI_OK&#160;</td><td class="fielddoc">
<p>Success </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aeed1da6c6f4f94d99f37d7ac1ac71ddbafc1669c8fcb43d5e26b5f27b38919050"></a>RVI_ERR_OPENSSL&#160;</td><td class="fielddoc">
<p>Unhandled error from OpenSSL </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aeed1da6c6f4f94d99f37d7ac1ac71ddba361dfcd7d313967375342b4b763d3c1b"></a>RVI_ERR_NOCONFIG&#160;</td><td class="fielddoc">
<p>Configuration error </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aeed1da6c6f4f94d99f37d7ac1ac71ddba568f843abd268eaaebe2e980abd9714f"></a>RVI_ERR_JSON&#160;</td><td class="fielddoc">
<p>Error in JSON </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aeed1da6c6f4f94d99f37d7ac1ac71ddbae057e884cf9ac810224d4146729aa67e"></a>RVI_ERR_SERVCERT&#160;</td><td class="fielddoc">
<p>Server certificate is missing </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aeed1da6c6f4f94d99f37d7ac1ac71ddbafd47a7d0e4041c819c0974f873b9c80c"></a>RVI_ERR_CLIENTCERT&#160;</td><td class="fielddoc">
<p>Client certificate is missing </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aeed1da6c6f4f94d99f37d7ac1ac71ddba7ff56995cc8ba07c087868a82a1ae614"></a>RVI_ERR_NORCVCERT&#160;</td><td class="fielddoc">
<p>Client did not receive server cert </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aeed1da6c6f4f94d99f37d7ac1ac71ddba557a1374709953e1bc6cc42fa1064ed0"></a>RVI_ERR_STREAMEND&#160;</td><td class="fielddoc">
<p>Stream end encountered unexpectedly </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aeed1da6c6f4f94d99f37d7ac1ac71ddba0445312b4f9444564313242404481481"></a>RVI_ERR_NOCRED&#160;</td><td class="fielddoc">
<p>No credentials </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aeed1da6c6f4f94d99f37d7ac1ac71ddba8e509d3cc8c9fc2a9e02d3d3d156b0af"></a>RVI_ERR_NOCMD&#160;</td><td class="fielddoc">
<p>No (known) command </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aeed1da6c6f4f94d99f37d7ac1ac71ddbaee7a5d33e64ebb2a58666fd3ce96eecd"></a>RVI_ERR_RIGHTS&#160;</td><td class="fielddoc">
<p>No right for that operation </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aeed1da6c6f4f94d99f37d7ac1ac71ddba56d42dd841e33ced44cc69d1572c8b56"></a>RVI_ERR_JSON_PART&#160;</td><td class="fielddoc">
<p>Partial JSON </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="adb87e68e1dac66c8fa2800cc7dfdb20c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rviCleanup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tear down the API. </p>
<p>Calling applications are expected to call this to cleanly tear down the API. This will disconnect from all active connections and free memory allocated by the library.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>- The handle for the RVI context to clean up.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a6600e35ef71734da8db7a3a9d9a44990"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rviConnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connect to a remote node at a specified address and port. </p>
<p>This function will attempt to connect to a remote node at the specified addr and port. It will spawn a new connection and block until all handshake and RVI negotiations are complete. On success, it will return the file descriptor for the new socket. On failure, it will return a negative error value.</p>
<p>New services may become immediately available upon connecting to a remote node. To discover the services that are currently available, use the <a class="el" href="rvi_8h.html#a1a1b2d9dce2123198fa75a5d66b8ecd3" title="Get list of services available. ">rviGetServices()</a> function. Services may be invoked via <a class="el" href="rvi_8h.html#a429680d590cfe541114232b62fb0ff58" title="Invoke a remote service. ">rviInvokeService()</a> using the fully-qualified service name.</p>
<p>This operation will block until all TLS read/write operations are complete.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>- The handle to the RVI context. </td></tr>
    <tr><td class="paramname">addr</td><td>- The address of the remote connection. </td></tr>
    <tr><td class="paramname">port</td><td>- The target port for the connection. This can be a numeric value or a string such as "http." Allowed values (inherited from OpenSSL) are http, telnet, socks, https, ssl, ftp, and gopher.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>File descriptor on success, negative error value otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a2e88293753962ee1f4c71fdf43696bfa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rviDisconnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disconnect from a remote node with a specified file descriptor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>- The handle to the RVI context. </td></tr>
    <tr><td class="paramname">fd</td><td>- The file descriptor for the connection to terminate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a3cbb737c19f0da2816bd47fe0d4b6bbf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rviGetConnections </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>connSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return all file descriptors in the RVI context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>- The handle to the RVI context. </td></tr>
    <tr><td class="paramname">conn</td><td>- Pointer to a buffer to store file descriptors (small integers) for each remote RVI node. </td></tr>
    <tr><td class="paramname">connSize</td><td>- Pointer to size of 'conn' buffer. This should be initialized to the size of the conn buffer. On success, it will be updated with the number of file descriptors returned.</td></tr>
  </table>
  </dd>
</dl>
<p>This function will fill the conn buffer with active file descriptors from the RVI context and update connSize to indicate the final size.</p>
<p>This operation is entirely local.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a1a1b2d9dce2123198fa75a5d66b8ecd3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rviGetServices </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get list of services available. </p>
<p>This function fills the buffer at result with pointers to strings, up to the value indicated by len. Memory for each string is dynamically allocated by the library and must be freed by the calling application. Before returning, len is updated with the actual number of strings.</p>
<p>This operation is entirely local.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>- The handle to the RVI context. </td></tr>
    <tr><td class="paramname">result</td><td>- A pointer to a block of pointers for storing strings </td></tr>
    <tr><td class="paramname">len</td><td>- The maximum number of pointers allocated in result</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a8d7cd26c745770781ea03547596faf32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a> rviInit </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>configFilename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the RVI library. Call before using any other functions. </p>
<p>The name of a JSON configuration file must be supplied. Example config: </p><pre class="fragment"> {
  "dev": {
      "key":  "./priv/clientkey.pem",
      "cert": "./priv/clientcert.pem",
      "id":   "genivi.org/client/bbfbb478-d628-480a-8528-cff40d73678f"
  },
  "ca": {
      "cert": "./priv/cacert.pem",
      "dir":  "./priv/"
  },
  "creddir": "./priv/"
 }
</pre><p>Notably, the device ID should be a unique ID generated from an external source, e.g., util-linux's uuidgen or Microsoft's guidgen.exe.</p>
<p>The ID format is "domain/device-type/uuid".</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">configFilename</td><td>- Path to the file containing RVI config options.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A handle for the API on success, NULL otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a429680d590cfe541114232b62fb0ff58"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rviInvokeService </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>serviceName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>parameters</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoke a remote service. </p>
<p>The service name must be the fully-qualified service name (as returned by, e.g., <a class="el" href="rvi_8h.html#a1a1b2d9dce2123198fa75a5d66b8ecd3" title="Get list of services available. ">rviGetServices()</a>). The service may be passed parameters in the form of a JSON object containing key-value pairs. Parameters are optional.</p>
<p>Introspection of RVI services is not supported as of the 0.5.0 release, so refer to the documentation on the services you intend to invoke to determine which parameters (if any) to pass.</p>
<p>This will send the RVI command over TLS to the remote node. The operation will block until all SSL read/write operations are complete.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>- The handle to the RVI context. </td></tr>
    <tr><td class="paramname">serviceName</td><td>- The fully-qualified service name to invoke </td></tr>
    <tr><td class="paramname">parameters</td><td>- A JSON structure containing the named parameter pairs</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a7f36294f32f87d64e14a03aeb60c4f66"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rviProcessInput </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>fdArr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fdLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle input on remote connection(s). </p>
<p>This function will read data from each of the file descriptors in fdArr (up to fdLen elements long). The calling application must ensure that fdArr is populated only with read-ready descriptors (returned by, e.g., (e)poll() or select()).</p>
<p>This operation will read one message from each file descriptor provided. The calling application should poll using a level trigger, since multiple messages may be pending on a single connection.</p>
<p>This is a blocking operation. If any descriptor in fdArr is not read-ready, the operation will block until data becomes available to read on the descriptor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>- The handle to the RVI context. </td></tr>
    <tr><td class="paramname">fdArr</td><td>- An array of file descriptors with read operations pending </td></tr>
    <tr><td class="paramname">fdLen</td><td>- The length of the file descriptor array</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a9325f0d58e28a06e04bab7b9bcb011bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rviRegisterService </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>serviceName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rvi_8h.html#a5ce1ba1e3026470b887b160a5e1d13cc">TRviCallback</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>serviceData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a service with a callback function. </p>
<p>This function makes services available to remote RVI nodes that are currently connected to this node. The service may be a fully-qualified service-name or a relative service name. If the service name is not prefixed with this node's identifier (as specified in the configuration file), it will automatically be added.</p>
<p>This will also notify all remote nodes that can invoke the service, based on credentials presented to this node. The operation will block until all SSL read/write operations are complete.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>- The handle to the RVI context. </td></tr>
    <tr><td class="paramname">serviceName</td><td>- The service name to register </td></tr>
    <tr><td class="paramname">callback</td><td>- The callback function to be executed upon service invocation. </td></tr>
    <tr><td class="paramname">serviceData</td><td>- Parameters to be passed to the callback function (in addition to any JSON parameters from the remote node)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a179f0b006746cfb7ffa643e7e39bb142"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rviUnregisterService </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rvi_8h.html#ac78b62a65c4f2e17a64f3841aa1555e1">TRviHandle</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>serviceName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a previously registered service. </p>
<p>This function unregisters a service that was previously registered by the calling application. If serviceName does not exist, or was registered by a remote node, it does nothing and returns an error code.</p>
<p>This will also notify all remote nodes that could have invoked the service, based on credentials presented to this node. The operation will block until all SSL read/write operations are complete.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>- The handle to the RVI context </td></tr>
    <tr><td class="paramname">serviceName</td><td>The fully-qualified service name to deregister</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, error code otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 24 2017 13:09:44 for Remote Vehicle Interaction C API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
